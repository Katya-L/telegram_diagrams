sequenceDiagram

    actor User
    participant C as Client
    participant S as Server

    User ->> C: 1. Ввод номера телефона
    C ->> C: 2. Отображение окна подтверждения номера
    User ->> C: 3. Подтверждение номера
    C ->> C: 4. Проверка валидности номера

    alt Некорректный номер 
        C ->> C: 5a. Отображение сообщения об ошибки

    else Корректный номер

        alt Данный аккаунт авторизован на другом устройстве
            C ->> S: 5b1. Запрос на отправку сообщения с кодом
            S ->> S: 6a. Генерация кода
            S ->> S: 7a. Отправка сообщения с кодом на аккаунт
        else Данный аккаунт не авторизован на другом устройстве
            C ->> S: 5b2. Запрос на отправку SMS с кодом
            S ->> S: 6b. Генерация кода
            S ->> S: 7b. Отправка SMS с кодом на номер
        end

        S -->> C: 8. Код авторизации
        C ->> C: 9. Отображение поля ввода
        User ->> C: 10. Ввод кода
        C ->> C: 11. Проверка кода

        alt Код неверный
            C ->> C: 12a. Отображение сообщения об ошибки
        else Код верный
            C ->> C: 12b. Переход на главный экран
        end
    end

